<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The pallet hooks trait. Implementing this lets you express some logic to execute."><meta name="keywords" content="rust, rustlang, rust-lang, Hooks"><title>Hooks in frame_support::traits - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../frame_support/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Trait Hooks</h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#provided-methods">Provided Methods</a></h3><div class="sidebar-links"><a href="#method.integrity_test">integrity_test</a><a href="#method.offchain_worker">offchain_worker</a><a href="#method.on_finalize">on_finalize</a><a href="#method.on_idle">on_idle</a><a href="#method.on_initialize">on_initialize</a><a href="#method.on_runtime_upgrade">on_runtime_upgrade</a></div><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div><h2 class="location">Other items in<br><a href="../index.html">frame_support</a>::<wbr><a href="index.html">traits</a></h2><div id="sidebar-vars" data-name="Hooks" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="../index.html">frame_support</a>::<wbr><a href="index.html">traits</a>::<wbr><a class="trait" href="#">Hooks</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/frame_support/traits/hooks.rs.html#214-292" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><pre class="rust trait"><code>pub trait Hooks&lt;BlockNumber&gt; {
    fn <a href="#method.on_finalize" class="fnname">on_finalize</a>(_n: BlockNumber) { ... }
<div class="item-spacer"></div>    fn <a href="#method.on_idle" class="fnname">on_idle</a>(_n: BlockNumber, _remaining_weight: <a class="type" href="../weights/type.Weight.html" title="type frame_support::weights::Weight">Weight</a>) -&gt; <a class="type" href="../weights/type.Weight.html" title="type frame_support::weights::Weight">Weight</a> { ... }
<div class="item-spacer"></div>    fn <a href="#method.on_initialize" class="fnname">on_initialize</a>(_n: BlockNumber) -&gt; <a class="type" href="../weights/type.Weight.html" title="type frame_support::weights::Weight">Weight</a> { ... }
<div class="item-spacer"></div>    fn <a href="#method.on_runtime_upgrade" class="fnname">on_runtime_upgrade</a>() -&gt; <a class="type" href="../weights/type.Weight.html" title="type frame_support::weights::Weight">Weight</a> { ... }
<div class="item-spacer"></div>    fn <a href="#method.offchain_worker" class="fnname">offchain_worker</a>(_n: BlockNumber) { ... }
<div class="item-spacer"></div>    fn <a href="#method.integrity_test" class="fnname">integrity_test</a>() { ... }
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The pallet hooks trait. Implementing this lets you express some logic to execute.</p>
</div></details><h2 id="provided-methods" class="small-section-header">Provided methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="method.on_finalize" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/frame_support/traits/hooks.rs.html#216" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.on_finalize" class="fnname">on_finalize</a>(_n: BlockNumber)</h4></div></summary><div class="docblock"><p>The block is being finalized. Implement to have something happen.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.on_idle" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/frame_support/traits/hooks.rs.html#223-228" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.on_idle" class="fnname">on_idle</a>(_n: BlockNumber, _remaining_weight: <a class="type" href="../weights/type.Weight.html" title="type frame_support::weights::Weight">Weight</a>) -&gt; <a class="type" href="../weights/type.Weight.html" title="type frame_support::weights::Weight">Weight</a></h4></div></summary><div class="docblock"><p>This will be run when the block is being finalized (before <code>on_finalize</code>).
Implement to have something happen using the remaining weight.
Will not fire if the remaining weight is 0.
Return the weight used, the hook will subtract it from current weight used
and pass the result to the next <code>on_idle</code> hook if it exists.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.on_initialize" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/frame_support/traits/hooks.rs.html#233-235" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.on_initialize" class="fnname">on_initialize</a>(_n: BlockNumber) -&gt; <a class="type" href="../weights/type.Weight.html" title="type frame_support::weights::Weight">Weight</a></h4></div></summary><div class="docblock"><p>The block is being initialized. Implement to have something happen.</p>
<p>Return the non-negotiable weight consumed in the block.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.on_runtime_upgrade" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/frame_support/traits/hooks.rs.html#251-253" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.on_runtime_upgrade" class="fnname">on_runtime_upgrade</a>() -&gt; <a class="type" href="../weights/type.Weight.html" title="type frame_support::weights::Weight">Weight</a></h4></div></summary><div class="docblock"><p>Perform a module upgrade.</p>
<p>NOTE: this doesn’t include all pallet logic triggered on runtime upgrade. For instance it
doesn’t include the write of the pallet version in storage. The final complete logic
triggered on runtime upgrade is given by implementation of <code>OnRuntimeUpgrade</code> trait by
<code>Pallet</code>.</p>
<h5 id="warning" class="section-header"><a href="#warning">Warning</a></h5>
<p>This function will be called before we initialized any runtime state, aka <code>on_initialize</code>
wasn’t called yet. So, information like the block number and any other
block local data are not accessible.</p>
<p>Return the non-negotiable weight consumed for runtime upgrade.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.offchain_worker" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/frame_support/traits/hooks.rs.html#286" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.offchain_worker" class="fnname">offchain_worker</a>(_n: BlockNumber)</h4></div></summary><div class="docblock"><p>Implementing this function on a module allows you to perform long-running tasks
that make (by default) validators generate transactions that feed results
of those long-running computations back on chain.</p>
<p>NOTE: This function runs off-chain, so it can access the block state,
but cannot preform any alterations. More specifically alterations are
not forbidden, but they are not persisted in any way after the worker
has finished.</p>
<p>This function is being called after every block import (when fully synced).</p>
<p>Implement this and use any of the <code>Offchain</code> <code>sp_io</code> set of APIs
to perform off-chain computations, calls and submit transactions
with results to trigger any on-chain changes.
Any state alterations are lost and are not persisted.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="method.integrity_test" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../src/frame_support/traits/hooks.rs.html#291" title="goto source code">[src]</a></div><h4 class="code-header">fn <a href="#method.integrity_test" class="fnname">integrity_test</a>()</h4></div></summary><div class="docblock"><p>Run integrity test.</p>
<p>The test is not executed in a externalities provided environment.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"></div><script type="text/javascript" src="../../implementors/frame_support/traits/trait.Hooks.js" async></script></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="frame_support" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>